From dde2ef75ee79c5f98e3747e470d83760010b753c Mon Sep 17 00:00:00 2001
From: nift4 <nift4@protonmail.com>
Date: Thu, 4 Apr 2024 06:37:01 +0530
Subject: [PATCH] Launcher3: Fix uninstalling apps from recents

neobuddy89: Updated for A15 QPR2

Change-Id: Icc1543ba4352991393c4b5efd37f3ab9dd3970ed
Signed-off-by: Pranav Vashi <neobuddy89@gmail.com>
---
 src/com/android/launcher3/SecondaryDropTarget.java  | 3 ++-
 src/com/android/launcher3/popup/SystemShortcut.java | 3 ++-
 2 files changed, 4 insertions(+), 2 deletions(-)

diff --git a/src/com/android/launcher3/SecondaryDropTarget.java b/src/com/android/launcher3/SecondaryDropTarget.java
index f4d3146ed5..19dae04e5a 100644
--- a/src/com/android/launcher3/SecondaryDropTarget.java
+++ b/src/com/android/launcher3/SecondaryDropTarget.java
@@ -201,7 +201,8 @@ public class SecondaryDropTarget extends ButtonDropTarget implements OnAlarmList
         Intent intent = null;
         UserHandle user = null;
         if (item != null &&
-                item.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION) {
+                (item.itemType == LauncherSettings.Favorites.ITEM_TYPE_APPLICATION ||
+                item.itemType == LauncherSettings.Favorites.ITEM_TYPE_TASK)) {
             intent = item.getIntent();
             user = item.user;
         }
diff --git a/src/com/android/launcher3/popup/SystemShortcut.java b/src/com/android/launcher3/popup/SystemShortcut.java
index dcbd799b4d..9894dec4c3 100644
--- a/src/com/android/launcher3/popup/SystemShortcut.java
+++ b/src/com/android/launcher3/popup/SystemShortcut.java
@@ -1,6 +1,7 @@
 package com.android.launcher3.popup;
 
 import static com.android.launcher3.LauncherSettings.Favorites.ITEM_TYPE_APPLICATION;
+import static com.android.launcher3.LauncherSettings.Favorites.ITEM_TYPE_TASK;
 import static com.android.launcher3.logging.StatsLogManager.LauncherEvent.LAUNCHER_DISMISS_PREDICTION_UNDO;
 import static com.android.launcher3.logging.StatsLogManager.LauncherEvent.LAUNCHER_PRIVATE_SPACE_INSTALL_SYSTEM_SHORTCUT_TAP;
 import static com.android.launcher3.logging.StatsLogManager.LauncherEvent.LAUNCHER_PRIVATE_SPACE_UNINSTALL_SYSTEM_SHORTCUT_TAP;
@@ -423,7 +424,7 @@ public abstract class SystemShortcut<T extends ActivityContext> extends ItemInfo
             Intent intent = null;
             UserHandle user = null;
             if (item != null &&
-                    item.itemType == ITEM_TYPE_APPLICATION) {
+                    (item.itemType == ITEM_TYPE_APPLICATION || item.itemType == ITEM_TYPE_TASK)) {
                 intent = item.getIntent();
                 user = item.user;
             }
-- 
2.51.2.windows.1

